# (Experimental) Atlas Map Viewer
![Alt text](Example1.jpg?raw=true "Exmaple1")
Used as an example to read ship and bed positions from Redis overlayed on top of a world and territory map.  It consists of two pieces, a go web service that retrieves and serves the ship and bed positions and a simple [React](https://reactjs.org/) / [Leaflet.js](https://leafletjs.com/) app.

The slippy map tiles for the world are generated by [ServerGridEditor](https://github.com/GrapeshotGames/ServerGridEditor) and should be placed in the "www/tiles" directory.

## Go Dependencies:
* go get github.com/go-redis/redis

## Setup
In general you need to generate a slippy style map (See ServerGridEditor or other tools) and clear out and replace all files in `www/tiles/*` with your map files. Make sure to match the server grid size in config.js and setup the following config options in sections below. Note: Untested with non square grids currently but we definitely want this to work if it doesn't already

### Web Service
Setup the config.json to point at your redis database and a few other things like the following should be configured:
```
{
    //Can be left blank but usually just ip of hosting machine in simple case 
    "Host": "",
	
    //Port to host the web service
    "Port": 8880,
	
    //Optional link to territory server
    "TerritoryURL": "http://localhost:8881/territoryTiles/",
	
    //Relative path to the static web files
    "StaticDir": "./www",
	
    //Frequency entities are polled from Redis
    "FetchRateInSeconds": 30,
	
    //Disable ability to send admin commands to game servers
    "DisableCommands": true,
	
    //Redis connect string
    "RedisAddress": "127.0.0.1:6379",
	
    //Redis password 
    "RedisPassword": "foobared",
}
```
Note: The config.json stays relative to binary path.

### Web App
The client file "www/config.js" holds some cluster specific information like the grid size.
```
const config = {
    //Number of columns in the grid
    ServersX: 15,
	
    // Number of rows in the grid
    ServersY: 15,
	
    //Command completion suggestion
    Suggestions: [
        "spawnshipfast name",
        "spawnbed name",
        "destroyall",
    ]
}
```

### Linking AtlasTerritoryMap
![Alt text](Example2.jpg?raw=true "Exmaple2")

Point your `config.json`'s TerritoryURL url to a valid base path that is hosting the territory overlay tile images. This is usually the location of your AtlasTerritoryMap binary itself (can be straight ip) or a location that it outputs to. Do note that you must have it enabled on AtlasTerritoryMap's config file `"EnableTileGeneration": true,`


